#!/bin/env ruby
require 'rbconfig'

keystore = ARGV[0]
value = ARGV[1]

case RbConfig::CONFIG['arch']
  when /x86_64-linux/i
    print `#{File.expand_path File.dirname(__FILE__)}/gosecret-linux-x64 -keystore=#{keystore} -mode=decrypt -value="#{value}"` 
  when /cygwin|mswin|mingw|bccwin|wince|emx/i
    print `#{File.expand_path File.dirname(__FILE__)}/gosecret-win-x64 -keystore=#{keystore} -mode=decrypt -value="#{value}"`   
  else
    STDERR.puts "OS not supported"
end